<UserControl
  x:Class="RealQuery.Views.UserControls.TransformationCard"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:hc="https://handyorg.github.io/handycontrol"
  xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
  xmlns:local="clr-namespace:RealQuery.Views.UserControls"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  d:DesignHeight="40"
  d:DesignWidth="800"
  mc:Ignorable="d">

  <Border
    Margin="0,2"
    Padding="12,8"
    Background="{DynamicResource RegionBrush}"
    BorderBrush="{DynamicResource BorderBrush}"
    BorderThickness="1"
    CornerRadius="4"
    Cursor="Hand">

    <Border.Style>
      <Style TargetType="Border">
        <Style.Triggers>
          <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Background" Value="{DynamicResource SecondaryRegionBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource PrimaryBrush}" />
          </Trigger>
        </Style.Triggers>
      </Style>
    </Border.Style>

    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <!--  Status  -->
        <ColumnDefinition Width="Auto" />
        <!--  Step Number  -->
        <ColumnDefinition Width="*" />
        <!--  Description  -->
        <ColumnDefinition Width="Auto" />
        <!--  Stats  -->
      </Grid.ColumnDefinitions>

      <!--  Status Icon  -->
      <TextBlock
        Grid.Column="0"
        Margin="0,0,8,0"
        VerticalAlignment="Center"
        FontSize="14"
        Text="{Binding StatusIcon}" />

      <!--  Step Number  -->
      <Border
        Grid.Column="1"
        Margin="0,0,10,0"
        Padding="6,2"
        VerticalAlignment="Center"
        Background="{DynamicResource PrimaryBrush}"
        CornerRadius="3">
        <TextBlock
          FontSize="11"
          FontWeight="Bold"
          Foreground="White"
          Text="{Binding StepNumber, StringFormat='#{0}'}" />
      </Border>

      <!--  Description  -->
      <TextBlock
        Grid.Column="2"
        VerticalAlignment="Center"
        FontSize="13"
        Text="{Binding Description}"
        TextTrimming="CharacterEllipsis"
        ToolTip="{Binding Description}" />

      <!--  Stats Panel  -->
      <StackPanel
        Grid.Column="3"
        Margin="10,0,0,0"
        VerticalAlignment="Center"
        Orientation="Horizontal">

        <!--  Row Count  -->
        <StackPanel Margin="0,0,12,0" Orientation="Horizontal">
          <iconPacks:PackIconPhosphorIcons
            Width="14"
            Height="14"
            Margin="0,0,4,0"
            VerticalAlignment="Center"
            Foreground="{DynamicResource PrimaryTextBrush}"
            Kind="TableBold" />
          <TextBlock
            VerticalAlignment="Center"
            FontSize="11"
            Foreground="{DynamicResource SecondaryTextBrush}">
            <Run Text="{Binding InputRowCount, Mode=OneWay}" />
            <Run Text="→" />
            <Run FontWeight="Bold" Text="{Binding OutputRowCount, Mode=OneWay}" />
          </TextBlock>
        </StackPanel>

        <!--  Execution Time  -->
        <StackPanel Orientation="Horizontal" Visibility="{Binding ExecutionTime, Converter={StaticResource Object2VisibilityConverter}}">
          <iconPacks:PackIconPhosphorIcons
            Width="14"
            Height="14"
            Margin="0,0,4,0"
            VerticalAlignment="Center"
            Foreground="{DynamicResource PrimaryTextBrush}"
            Kind="ClockBold" />
          <TextBlock
            VerticalAlignment="Center"
            FontSize="11"
            Foreground="{DynamicResource SecondaryTextBrush}"
            Text="{Binding ExecutionTime, StringFormat='{}{0:mm\\:ss\\.fff}'}" />
        </StackPanel>
      </StackPanel>
    </Grid>
  </Border>
</UserControl>
