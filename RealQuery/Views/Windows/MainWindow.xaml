<hc:Window
  x:Class="RealQuery.Views.Windows.MainWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:hc="https://handyorg.github.io/handycontrol"
  xmlns:local="clr-namespace:RealQuery.Views.Windows"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  Title="RealQuery - Visual ETL Tool"
  Width="1400"
  Height="900"
  MinWidth="1000"
  MinHeight="600"
  mc:Ignorable="d">

  <hc:Window.NonClientAreaContent>
    <Grid>
      <!--  Toolbar no NonClientArea para visual mais moderno  -->
      <StackPanel Margin="10,0,0,0" Orientation="Horizontal">
        <Button
          Margin="5,0"
          Content="Import"
          Style="{StaticResource ButtonPrimary}" />
        <Button
          Margin="5,0"
          Content="Export"
          Style="{StaticResource ButtonDefault}" />
        <Separator />
        <Button
          Margin="5,0"
          Content="Execute"
          Style="{StaticResource ButtonSuccess}" />
        <Button
          Margin="5,0"
          Content="Clear"
          Style="{StaticResource ButtonWarning}" />
        <Separator />
        <Button
          Margin="5,0"
          Content="Save"
          Style="{StaticResource ButtonInfo}" />
      </StackPanel>
    </Grid>
  </hc:Window.NonClientAreaContent>

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="*" />
      <!--  Main Content  -->
      <RowDefinition Height="Auto" />
      <!--  StatusBar  -->
    </Grid.RowDefinitions>

    <!--  Main Content Area  -->
    <Grid Grid.Row="0">
      <Grid.ColumnDefinitions>
        <ColumnDefinition
          Width="350"
          MinWidth="200"
          MaxWidth="500" />
        <!--  Steps Panel  -->
        <ColumnDefinition Width="Auto" />
        <!--  Splitter  -->
        <ColumnDefinition Width="*" MinWidth="400" />
        <!--  Data + Code  -->
      </Grid.ColumnDefinitions>

      <!--  Left Panel: Steps List  -->
      <hc:Card
        Grid.Column="0"
        Margin="10"
        Effect="{StaticResource EffectShadow2}">
        <DockPanel>
          <hc:UniformSpacingPanel
            Margin="10"
            DockPanel.Dock="Top"
            Spacing="10">
            <TextBlock Style="{StaticResource TextBlockTitle}" Text="Transformation Steps" />
            <Button Content="Clear All" Style="{StaticResource ButtonDanger}" />
          </hc:UniformSpacingPanel>

          <ListBox x:Name="StepsListBox" Margin="10">
            <!--  Placeholder items  -->
            <ListBoxItem>
              <hc:Card>
                <StackPanel>
                  <TextBlock FontWeight="Bold" Text="1. Import Excel" />
                  <TextBlock
                    FontSize="11"
                    Foreground="Gray"
                    Text="Data loaded: 1,234 rows" />
                </StackPanel>
              </hc:Card>
            </ListBoxItem>
            <ListBoxItem>
              <hc:Card>
                <StackPanel>
                  <TextBlock FontWeight="Bold" Text="2. Filter Rows" />
                  <TextBlock
                    FontSize="11"
                    Foreground="Gray"
                    Text="Applied filter: Age &gt; 18" />
                </StackPanel>
              </hc:Card>
            </ListBoxItem>
          </ListBox>
        </DockPanel>
      </hc:Card>

      <!--  GridSplitter  -->
      <GridSplitter
        Grid.Column="1"
        HorizontalAlignment="Center"
        VerticalAlignment="Stretch"
        Style="{StaticResource GridSplitter.Handy}" />

      <!--  Right Panel: Data Grid + Code Editor  -->
      <Grid Grid.Column="2">
        <Grid.RowDefinitions>
          <RowDefinition Height="3*" MinHeight="200" />
          <!--  Data Grid (60%)  -->
          <RowDefinition Height="Auto" />
          <!--  Splitter  -->
          <RowDefinition Height="2*" MinHeight="150" />
          <!--  Code Editor (40%)  -->
        </Grid.RowDefinitions>

        <!--  Data Preview Grid  -->
        <hc:Card
          Grid.Row="0"
          Margin="10"
          Effect="{StaticResource EffectShadow2}">
          <DockPanel>
            <hc:UniformSpacingPanel
              Margin="10"
              DockPanel.Dock="Top"
              Spacing="10">
              <TextBlock Style="{StaticResource TextBlockTitle}" Text="Data Preview" />
              <TextBlock
                VerticalAlignment="Center"
                FontSize="12"
                Foreground="Gray"
                Text="1,234 rows × 5 columns" />
            </hc:UniformSpacingPanel>

            <DataGrid
              x:Name="DataPreviewGrid"
              Margin="10"
              AutoGenerateColumns="True"
              CanUserAddRows="False"
              CanUserDeleteRows="False"
              GridLinesVisibility="Vertical"
              HeadersVisibility="Column"
              IsReadOnly="True"
              Style="{StaticResource DataGrid.Small}"
              VerticalGridLinesBrush="{DynamicResource SecondaryRegionBrush}">
              <!--  Placeholder data será adicionado via código  -->
            </DataGrid>
          </DockPanel>
        </hc:Card>

        <!--  GridSplitter  -->
        <GridSplitter
          Grid.Row="1"
          Height="5"
          HorizontalAlignment="Stretch"
          VerticalAlignment="Center"
          Style="{StaticResource GridSplitter.Handy}" />

        <!--  Code Editor Area  -->
        <hc:Card
          Grid.Row="2"
          Margin="10"
          Effect="{StaticResource EffectShadow2}">
          <DockPanel>
            <hc:UniformSpacingPanel
              Margin="10"
              DockPanel.Dock="Top"
              Spacing="10">
              <TextBlock Style="{StaticResource TextBlockTitle}" Text="C# Code Editor" />
              <Button Content="Execute" Style="{StaticResource ButtonSuccess}" />
              <Button Content="Templates" Style="{StaticResource ButtonInfo}" />
            </hc:UniformSpacingPanel>

            <!--  Placeholder para AvalonEdit (será adicionado via código)  -->
            <Border
              x:Name="CodeEditorContainer"
              Margin="10"
              BorderBrush="LightGray"
              BorderThickness="1"
              CornerRadius="3">
              <TextBox
                x:Name="CodeEditorPlaceholder"
                AcceptsReturn="True"
                AcceptsTab="True"
                FontFamily="Consolas"
                FontSize="14"
                HorizontalScrollBarVisibility="Auto"
                Text="// Write your C# transformation code here&#x0A;// Example:&#x0A;data = data.Where(row =&gt; row[&quot;Age&quot;] &gt; 18);"
                VerticalScrollBarVisibility="Auto" />
            </Border>
          </DockPanel>
        </hc:Card>
      </Grid>
    </Grid>

    <!--  StatusBar  -->
    <StatusBar Grid.Row="1">
      <StatusBarItem>
        <TextBlock Text="Ready" />
      </StatusBarItem>
      <Separator />
      <StatusBarItem>
        <TextBlock x:Name="StatusRowCount" Text="Rows: 1,234" />
      </StatusBarItem>
      <StatusBarItem>
        <TextBlock x:Name="StatusColumnCount" Text="Columns: 5" />
      </StatusBarItem>
      <Separator />
      <StatusBarItem>
        <TextBlock x:Name="StatusExecutionTime" Text="Last execution: 0.2s" />
      </StatusBarItem>
    </StatusBar>
  </Grid>
</hc:Window>